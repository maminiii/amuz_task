{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport ForeignKey from \"../fields/ForeignKey\";\nimport ManyToMany from \"../fields/ManyToMany\";\nimport RelationalField from \"../fields/RelationalField\";\nimport FieldSelectorSpec from \"./FieldSelectorSpec\";\nimport ModelSelectorSpec from \"./ModelSelectorSpec\";\n/**\n * @module selectors\n * @private\n */\n\nexport function createFieldSelectorSpec(_ref) {\n  var parent = _ref.parent,\n      model = _ref.model,\n      field = _ref.field,\n      fieldModel = _ref.fieldModel,\n      accessorName = _ref.accessorName,\n      orm = _ref.orm,\n      isVirtual = _ref.isVirtual;\n  var fieldSelectorSpec = new FieldSelectorSpec({\n    parent: parent,\n    model: model,\n    field: field,\n    fieldModel: fieldModel,\n    accessorName: accessorName,\n    orm: orm,\n    isVirtual: isVirtual\n  });\n  /* Do not even try to create field selectors below attributes. */\n\n  if (!(field instanceof RelationalField)) {\n    // \"orm.Author.name.publisher\" would be nonsense\n    return fieldSelectorSpec;\n  }\n  /* Prevent field selectors below collections. */\n\n\n  if (parent instanceof FieldSelectorSpec) {\n    /* eslint-disable no-underscore-dangle */\n    if ( // \"orm.Author.books.publisher\" would be nonsense\n    parent._field instanceof ForeignKey && parent._isVirtual || // \"orm.Genre.books.publisher\" would be nonsense\n    parent._field instanceof ManyToMany) {\n      throw new Error(\"Cannot create a selector for `\".concat(parent._accessorName, \".\").concat(accessorName, \"` because `\").concat(parent._accessorName, \"` is a collection field.\"));\n    }\n  }\n\n  var toModelName = field.toModelName;\n  var toModel = orm.get(toModelName === \"this\" ? model.modelName : toModelName);\n  Object.entries(toModel.fields).forEach(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        relatedFieldName = _ref3[0],\n        relatedField = _ref3[1];\n\n    var fieldAccessorName = relatedField.as || relatedFieldName;\n    Object.defineProperty(fieldSelectorSpec, fieldAccessorName, {\n      get: function get() {\n        return createFieldSelectorSpec({\n          parent: fieldSelectorSpec,\n          model: model,\n          fieldModel: toModel,\n          field: relatedField,\n          accessorName: fieldAccessorName,\n          orm: orm,\n          isVirtual: false\n        });\n      }\n    });\n  });\n  Object.entries(toModel.virtualFields).forEach(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        relatedFieldName = _ref5[0],\n        relatedField = _ref5[1];\n\n    var fieldAccessorName = relatedField.as || relatedFieldName;\n\n    if (fieldSelectorSpec.hasOwnProperty(fieldAccessorName)) {\n      return;\n    }\n\n    Object.defineProperty(fieldSelectorSpec, fieldAccessorName, {\n      get: function get() {\n        return createFieldSelectorSpec({\n          parent: fieldSelectorSpec,\n          model: model,\n          fieldModel: toModel,\n          field: relatedField,\n          accessorName: fieldAccessorName,\n          orm: orm,\n          isVirtual: true\n        });\n      }\n    });\n  });\n  return fieldSelectorSpec;\n}\nexport function createModelSelectorSpec(_ref6) {\n  var model = _ref6.model,\n      orm = _ref6.orm;\n  var modelSelectorSpec = new ModelSelectorSpec({\n    parent: null,\n    orm: orm,\n    model: model\n  });\n  Object.entries(model.fields).forEach(function (_ref7) {\n    var _ref8 = _slicedToArray(_ref7, 2),\n        fieldName = _ref8[0],\n        field = _ref8[1];\n\n    var fieldAccessorName = field.as || fieldName;\n    Object.defineProperty(modelSelectorSpec, fieldAccessorName, {\n      get: function get() {\n        return createFieldSelectorSpec({\n          parent: modelSelectorSpec,\n          model: model,\n          fieldModel: model,\n          field: field,\n          accessorName: fieldAccessorName,\n          orm: orm,\n          isVirtual: false\n        });\n      }\n    });\n  });\n  Object.entries(model.virtualFields).forEach(function (_ref9) {\n    var _ref10 = _slicedToArray(_ref9, 2),\n        fieldName = _ref10[0],\n        field = _ref10[1];\n\n    var fieldAccessorName = field.as || fieldName;\n\n    if (modelSelectorSpec.hasOwnProperty(fieldAccessorName)) {\n      return;\n    }\n\n    Object.defineProperty(modelSelectorSpec, fieldAccessorName, {\n      get: function get() {\n        return createFieldSelectorSpec({\n          parent: modelSelectorSpec,\n          model: model,\n          fieldModel: model,\n          field: field,\n          accessorName: fieldAccessorName,\n          orm: orm,\n          isVirtual: true\n        });\n      }\n    });\n  });\n  return modelSelectorSpec;\n}","map":{"version":3,"names":["_slicedToArray","ForeignKey","ManyToMany","RelationalField","FieldSelectorSpec","ModelSelectorSpec","createFieldSelectorSpec","_ref","parent","model","field","fieldModel","accessorName","orm","isVirtual","fieldSelectorSpec","_field","_isVirtual","Error","concat","_accessorName","toModelName","toModel","get","modelName","Object","entries","fields","forEach","_ref2","_ref3","relatedFieldName","relatedField","fieldAccessorName","as","defineProperty","virtualFields","_ref4","_ref5","hasOwnProperty","createModelSelectorSpec","_ref6","modelSelectorSpec","_ref7","_ref8","fieldName","_ref9","_ref10"],"sources":["/Users/developer/task/task3/node_modules/redux-orm/es/selectors/index.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport ForeignKey from \"../fields/ForeignKey\";\nimport ManyToMany from \"../fields/ManyToMany\";\nimport RelationalField from \"../fields/RelationalField\";\nimport FieldSelectorSpec from \"./FieldSelectorSpec\";\nimport ModelSelectorSpec from \"./ModelSelectorSpec\";\n/**\n * @module selectors\n * @private\n */\n\nexport function createFieldSelectorSpec(_ref) {\n  var parent = _ref.parent,\n      model = _ref.model,\n      field = _ref.field,\n      fieldModel = _ref.fieldModel,\n      accessorName = _ref.accessorName,\n      orm = _ref.orm,\n      isVirtual = _ref.isVirtual;\n  var fieldSelectorSpec = new FieldSelectorSpec({\n    parent: parent,\n    model: model,\n    field: field,\n    fieldModel: fieldModel,\n    accessorName: accessorName,\n    orm: orm,\n    isVirtual: isVirtual\n  });\n  /* Do not even try to create field selectors below attributes. */\n\n  if (!(field instanceof RelationalField)) {\n    // \"orm.Author.name.publisher\" would be nonsense\n    return fieldSelectorSpec;\n  }\n  /* Prevent field selectors below collections. */\n\n\n  if (parent instanceof FieldSelectorSpec) {\n    /* eslint-disable no-underscore-dangle */\n    if ( // \"orm.Author.books.publisher\" would be nonsense\n    parent._field instanceof ForeignKey && parent._isVirtual || // \"orm.Genre.books.publisher\" would be nonsense\n    parent._field instanceof ManyToMany) {\n      throw new Error(\"Cannot create a selector for `\".concat(parent._accessorName, \".\").concat(accessorName, \"` because `\").concat(parent._accessorName, \"` is a collection field.\"));\n    }\n  }\n\n  var toModelName = field.toModelName;\n  var toModel = orm.get(toModelName === \"this\" ? model.modelName : toModelName);\n  Object.entries(toModel.fields).forEach(function (_ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        relatedFieldName = _ref3[0],\n        relatedField = _ref3[1];\n\n    var fieldAccessorName = relatedField.as || relatedFieldName;\n    Object.defineProperty(fieldSelectorSpec, fieldAccessorName, {\n      get: function get() {\n        return createFieldSelectorSpec({\n          parent: fieldSelectorSpec,\n          model: model,\n          fieldModel: toModel,\n          field: relatedField,\n          accessorName: fieldAccessorName,\n          orm: orm,\n          isVirtual: false\n        });\n      }\n    });\n  });\n  Object.entries(toModel.virtualFields).forEach(function (_ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        relatedFieldName = _ref5[0],\n        relatedField = _ref5[1];\n\n    var fieldAccessorName = relatedField.as || relatedFieldName;\n\n    if (fieldSelectorSpec.hasOwnProperty(fieldAccessorName)) {\n      return;\n    }\n\n    Object.defineProperty(fieldSelectorSpec, fieldAccessorName, {\n      get: function get() {\n        return createFieldSelectorSpec({\n          parent: fieldSelectorSpec,\n          model: model,\n          fieldModel: toModel,\n          field: relatedField,\n          accessorName: fieldAccessorName,\n          orm: orm,\n          isVirtual: true\n        });\n      }\n    });\n  });\n  return fieldSelectorSpec;\n}\nexport function createModelSelectorSpec(_ref6) {\n  var model = _ref6.model,\n      orm = _ref6.orm;\n  var modelSelectorSpec = new ModelSelectorSpec({\n    parent: null,\n    orm: orm,\n    model: model\n  });\n  Object.entries(model.fields).forEach(function (_ref7) {\n    var _ref8 = _slicedToArray(_ref7, 2),\n        fieldName = _ref8[0],\n        field = _ref8[1];\n\n    var fieldAccessorName = field.as || fieldName;\n    Object.defineProperty(modelSelectorSpec, fieldAccessorName, {\n      get: function get() {\n        return createFieldSelectorSpec({\n          parent: modelSelectorSpec,\n          model: model,\n          fieldModel: model,\n          field: field,\n          accessorName: fieldAccessorName,\n          orm: orm,\n          isVirtual: false\n        });\n      }\n    });\n  });\n  Object.entries(model.virtualFields).forEach(function (_ref9) {\n    var _ref10 = _slicedToArray(_ref9, 2),\n        fieldName = _ref10[0],\n        field = _ref10[1];\n\n    var fieldAccessorName = field.as || fieldName;\n\n    if (modelSelectorSpec.hasOwnProperty(fieldAccessorName)) {\n      return;\n    }\n\n    Object.defineProperty(modelSelectorSpec, fieldAccessorName, {\n      get: function get() {\n        return createFieldSelectorSpec({\n          parent: modelSelectorSpec,\n          model: model,\n          fieldModel: model,\n          field: field,\n          accessorName: fieldAccessorName,\n          orm: orm,\n          isVirtual: true\n        });\n      }\n    });\n  });\n  return modelSelectorSpec;\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}