{"ast":null,"code":"import { createSelector } from \"redux-orm\";\nimport orm from \"../orm\"; // =====SELECTORS=====\n// ALL POSTS\n// returns all posts, with the user's name included\n\nexport const postsSelector = createSelector(orm, session => {\n  const postModels = session.Post.all().toModelArray();\n  const formattedPosts = postModels.map(post => {\n    let userId = \"\";\n\n    if (!post.user) {\n      console.warn(\"No user model found for post: \", post);\n    } else {\n      userId = post.user.id;\n    }\n\n    return {\n      id: post.id,\n      userId,\n      title: post.title,\n      completed: post.completed\n    };\n  });\n  return formattedPosts;\n}); // CURRENT USER POSTS\n// returns posts for the current user (based on currentUser 'id' in store)\n\nexport const currentUserPostsSelector = createSelector([orm, state => state.currentUser], (session, currentUser) => {\n  if (currentUser === undefined || currentUser === null) return [];\n  const postModels = session.Post.all().toModelArray();\n  return postModels.flatMap(post => {\n    if (post.user.id === currentUser) {\n      return [{\n        id: post.id,\n        content: post.content,\n        name: post.user.name\n      }];\n    } else {\n      return [];\n    }\n  });\n}); // POSTS BY ID\n// e.g.   const userPosts = useSelector(state => userPostsSelector(state, id));\n// would return an array of posts for the user with the given id\n// (redux-orm style, not used in app)\n\nexport const userPostsSelector = createSelector([orm.User, orm.User.posts], (user, posts) => {\n  if (!posts) return [];\n  return posts.map(post => ({\n    id: post.id,\n    userId: user.id,\n    title: post.title,\n    completed: post.completed\n  }));\n});","map":{"version":3,"names":["createSelector","orm","postsSelector","session","postModels","Post","all","toModelArray","formattedPosts","map","post","userId","user","console","warn","id","title","completed","currentUserPostsSelector","state","currentUser","undefined","flatMap","content","name","userPostsSelector","User","posts"],"sources":["/Users/developer/task/task3/src/store/modelDucks/PostSelectors.js"],"sourcesContent":["import { createSelector } from \"redux-orm\";\nimport orm from \"../orm\";\n\n// =====SELECTORS=====\n// ALL POSTS\n// returns all posts, with the user's name included\nexport const postsSelector = createSelector(orm, (session) => {\n  const postModels = session.Post.all().toModelArray();\n  const formattedPosts = postModels.map((post) => {\n    let userId = \"\";\n    if (!post.user) {\n      console.warn(\"No user model found for post: \", post);\n    } else {\n      userId = post.user.id;\n    }\n    return {\n      id: post.id,\n      userId,\n      title: post.title,\n      completed: post.completed,\n    };\n  });\n  return formattedPosts;\n});\n\n// CURRENT USER POSTS\n// returns posts for the current user (based on currentUser 'id' in store)\nexport const currentUserPostsSelector = createSelector(\n  [orm, (state) => state.currentUser],\n  (session, currentUser) => {\n    if (currentUser === undefined || currentUser === null) return [];\n    const postModels = session.Post.all().toModelArray();\n    return postModels.flatMap((post) => {\n      if (post.user.id === currentUser) {\n        return [\n          {\n            id: post.id,\n            content: post.content,\n            name: post.user.name,\n          },\n        ];\n      } else {\n        return [];\n      }\n    });\n  }\n);\n\n// POSTS BY ID\n// e.g.   const userPosts = useSelector(state => userPostsSelector(state, id));\n// would return an array of posts for the user with the given id\n// (redux-orm style, not used in app)\nexport const userPostsSelector = createSelector(\n  [orm.User, orm.User.posts],\n  (user, posts) => {\n    if (!posts) return [];\n    return posts.map((post) => ({\n      id: post.id,\n      userId: user.id,\n      title: post.title,\n      completed: post.completed,\n    }));\n  }\n);\n"],"mappings":"AAAA,SAASA,cAAT,QAA+B,WAA/B;AACA,OAAOC,GAAP,MAAgB,QAAhB,C,CAEA;AACA;AACA;;AACA,OAAO,MAAMC,aAAa,GAAGF,cAAc,CAACC,GAAD,EAAOE,OAAD,IAAa;EAC5D,MAAMC,UAAU,GAAGD,OAAO,CAACE,IAAR,CAAaC,GAAb,GAAmBC,YAAnB,EAAnB;EACA,MAAMC,cAAc,GAAGJ,UAAU,CAACK,GAAX,CAAgBC,IAAD,IAAU;IAC9C,IAAIC,MAAM,GAAG,EAAb;;IACA,IAAI,CAACD,IAAI,CAACE,IAAV,EAAgB;MACdC,OAAO,CAACC,IAAR,CAAa,gCAAb,EAA+CJ,IAA/C;IACD,CAFD,MAEO;MACLC,MAAM,GAAGD,IAAI,CAACE,IAAL,CAAUG,EAAnB;IACD;;IACD,OAAO;MACLA,EAAE,EAAEL,IAAI,CAACK,EADJ;MAELJ,MAFK;MAGLK,KAAK,EAAEN,IAAI,CAACM,KAHP;MAILC,SAAS,EAAEP,IAAI,CAACO;IAJX,CAAP;EAMD,CAbsB,CAAvB;EAcA,OAAOT,cAAP;AACD,CAjB0C,CAApC,C,CAmBP;AACA;;AACA,OAAO,MAAMU,wBAAwB,GAAGlB,cAAc,CACpD,CAACC,GAAD,EAAOkB,KAAD,IAAWA,KAAK,CAACC,WAAvB,CADoD,EAEpD,CAACjB,OAAD,EAAUiB,WAAV,KAA0B;EACxB,IAAIA,WAAW,KAAKC,SAAhB,IAA6BD,WAAW,KAAK,IAAjD,EAAuD,OAAO,EAAP;EACvD,MAAMhB,UAAU,GAAGD,OAAO,CAACE,IAAR,CAAaC,GAAb,GAAmBC,YAAnB,EAAnB;EACA,OAAOH,UAAU,CAACkB,OAAX,CAAoBZ,IAAD,IAAU;IAClC,IAAIA,IAAI,CAACE,IAAL,CAAUG,EAAV,KAAiBK,WAArB,EAAkC;MAChC,OAAO,CACL;QACEL,EAAE,EAAEL,IAAI,CAACK,EADX;QAEEQ,OAAO,EAAEb,IAAI,CAACa,OAFhB;QAGEC,IAAI,EAAEd,IAAI,CAACE,IAAL,CAAUY;MAHlB,CADK,CAAP;IAOD,CARD,MAQO;MACL,OAAO,EAAP;IACD;EACF,CAZM,CAAP;AAaD,CAlBmD,CAA/C,C,CAqBP;AACA;AACA;AACA;;AACA,OAAO,MAAMC,iBAAiB,GAAGzB,cAAc,CAC7C,CAACC,GAAG,CAACyB,IAAL,EAAWzB,GAAG,CAACyB,IAAJ,CAASC,KAApB,CAD6C,EAE7C,CAACf,IAAD,EAAOe,KAAP,KAAiB;EACf,IAAI,CAACA,KAAL,EAAY,OAAO,EAAP;EACZ,OAAOA,KAAK,CAAClB,GAAN,CAAWC,IAAD,KAAW;IAC1BK,EAAE,EAAEL,IAAI,CAACK,EADiB;IAE1BJ,MAAM,EAAEC,IAAI,CAACG,EAFa;IAG1BC,KAAK,EAAEN,IAAI,CAACM,KAHc;IAI1BC,SAAS,EAAEP,IAAI,CAACO;EAJU,CAAX,CAAV,CAAP;AAMD,CAV4C,CAAxC"},"metadata":{},"sourceType":"module"}